(this.webpackJsonpclocke=this.webpackJsonpclocke||[]).push([[0],{103:function(e){e.exports=JSON.parse('{"domain":"clocke.auth0.com","clientId":"tKfUwxoUz0Y3HWZRNuDM27fNkLzA8qn5","redirect_uri":"https://ctrepka.github.io/clocke","audience":"https://clocke.auth0.com/api/v2/"}')},265:function(e,t,n){e.exports={"padding-8":"SingleTimeline_padding-8__2JLjo","overflow-visible":"SingleTimeline_overflow-visible__Ff5Sf"}},305:function(e,t,n){},307:function(e,t,n){},308:function(e,t,n){},476:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(73),i=n.n(c),l=(n(305),n(141)),o=n(37),u=n.n(o),m=n(60),s=n(11),d=(n(307),n(308),n(63)),p=n(53),b=n(23),f=n(279),E=n(246),j=n.n(E),h=function(){return window.history.replaceState({},document.title,window.location.pathname)},g=r.a.createContext(),v=function(){return Object(a.useContext)(g)},k=function(e){var t=e.children,n=e.onRedirectCallback,c=void 0===n?h:n,i=Object(f.a)(e,["children","onRedirectCallback"]),l=Object(a.useState)(),o=Object(s.a)(l,2),d=o[0],p=o[1],b=Object(a.useState)(),E=Object(s.a)(b,2),v=E[0],k=E[1],O=Object(a.useState)(),T=Object(s.a)(O,2),w=T[0],S=T[1],P=Object(a.useState)(!0),_=Object(s.a)(P,2),y=_[0],C=_[1],D=Object(a.useState)(!1),N=Object(s.a)(D,2),$=N[0],x=N[1];Object(a.useEffect)((function(){(function(){var e=Object(m.a)(u.a.mark((function e(){var t,n,a,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j()(i);case 2:if(t=e.sent,S(t),!window.location.search.includes("code=")||!window.location.search.includes("state=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:n=e.sent,a=n.appState,c(a);case 10:return e.next=12,t.isAuthenticated();case 12:if(r=e.sent,p(r),!r){e.next=19;break}return e.next=17,t.getUser();case 17:l=e.sent,k(l);case 19:C(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var R=function(){var e=Object(m.a)(u.a.mark((function e(){var t,n,a=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},x(!0),e.prev=2,e.next=5,w.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,x(!1),e.finish(10);case 13:return e.next=15,w.getUser();case 15:n=e.sent,k(n),p(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,w.handleRedirectCallback();case 3:return e.next=5,w.getUser();case 5:t=e.sent,C(!1),p(!0),k(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(g.Provider,{value:{isAuthenticated:d,user:v,loading:y,popupOpen:$,loginWithPopup:R,handleRedirectCallback:I,getIdTokenClaims:function(){return w.getIdTokenClaims.apply(w,arguments)},loginWithRedirect:function(){return w.loginWithRedirect.apply(w,arguments)},getTokenSilently:function(){return w.getTokenSilently.apply(w,arguments)},getTokenWithPopup:function(){return w.getTokenWithPopup.apply(w,arguments)},logout:function(){return w.logout.apply(w,arguments)}}},t)},O=n(494),T=n(479),w=n(84),S=n(492),P=n(495);var _=n(21),y=n.n(_),C=n(22);function D(){var e=Object(b.a)(["query Running( $UserId: String! ) {\n    TimeStamp(where: {StartTime: {_is_null: false}, EndTime: {_is_null: true}, user_id: {_eq: $UserId}}) {\n      id\n      StartTime\n      parentProject {\n        id\n        Name\n      }\n      parentTask {\n        id\n        Name\n      }\n    }\n  }\n"]);return D=function(){return e},e}function N(){var e=Object(b.a)(["\nmutation update_Timestamp($id: uuid!, $Project: uuid!, $Task: uuid!, $EndTime: timestamptz!, $Public: Boolean!) {\n    update_TimeStamp(where: {id: {_eq: $id}}, _set: {EndTime: $EndTime, Project: $Project, Public: $Public, Task: $Task}) {\n      affected_rows\n    }\n  }\n"]);return N=function(){return e},e}function $(){var e=Object(b.a)(["\nmutation insert_Timestamp($Project: uuid!, $Task: uuid!, $StartTime: timestamptz!, $Public: Boolean!, $UserId: String! ) {\n    insert_TimeStamp(objects: { Project: $Project, Task: $Task, StartTime: $StartTime, Public: $Public, user_id: $UserId }){\n      affected_rows\n      returning {\n          id\n      }\n    }\n  }\n"]);return $=function(){return e},e}var x=y()($()),R=y()(N()),I=y()(D());function q(){var e=Object(b.a)(["\n    query getProject($id: uuid!) {\n      Project_by_pk(id: $id) {\n        id\n        Name\n        Description\n        Tasks {\n            id\n            Name\n            Description\n            Public\n            Project\n        }\n        TimeStamps(order_by: {StartTime: desc, EndTime: desc_nulls_first}){\n              StartTime\n              EndTime\n              parentTask{ \n                  id\n                  Name \n              }\n              parentProject{ \n                  id\n                  Name \n              }\n        }\n      }\n    }\n  "]);return q=function(){return e},e}function U(){var e=Object(b.a)(["\n        query getProjects {\n            Project {\n              id\n              Name\n            }\n        }\n    "]);return U=function(){return e},e}function F(){var e=Object(b.a)(["\nquery getProjects {\n  Project {\n    id\n    Name\n    Description\n    Tasks {\n        id\n        Name\n        parentProject {\n            id\n        }\n    }\n    Public\n  },\n  TimeStamp(order_by: {StartTime: desc, EndTime: desc_nulls_first}){\n    StartTime\n          EndTime\n          parentTask{ \n              id\n              Name \n          }\n          parentProject{\n              id\n              Name\n          }\n  }\n}\n"]);return F=function(){return e},e}function A(){var e=Object(b.a)(["\n    mutation updateProject($id: uuid!, $Description: String!, $Name: String!, $Public: Boolean!) {\n        update_Project(where: {id: {_eq: $id}}, _set: {Description: $Description, Name: $Name, Public: $Public}) {\n        affected_rows\n    }\n}"]);return A=function(){return e},e}function B(){var e=Object(b.a)(["\n  mutation addProject($Name: String!, $Description: String!, $Public: Boolean!, $UserId: String! ){\n    insert_Project(objects: {Description: $Description, Name: $Name, Public: $Public, user_id: $UserId }) {\n      affected_rows\n    }\n  }\n"]);return B=function(){return e},e}function z(){var e=Object(b.a)(["\nmutation deleteProject($id: uuid!) {\n    delete_Project(where: {id: {_eq: $id}}) {\n      affected_rows\n    }\n  }\n"]);return z=function(){return e},e}var M=y()(z()),W=y()(B()),H=y()(A()),L=y()(F()),Q=y()(U()),J=y()(q()),G=function(e){var t=function(t){var n=[],a=[];return e.projects.forEach((function(e){return n.push.apply(n,Object(w.a)(e.Tasks))})),n.map((function(e){a.push({key:e.id,value:e.id,text:e.Name,parent_project:e.parentProject.id})})),t&&(a=a.filter((function(e){return e.parent_project==t}))),a},n=Object(a.useState)(function(){var t=[];return e.projects.map((function(e){t.push({key:e.id,value:e.id,text:e.Name})})),t}()),c=Object(s.a)(n,2),i=c[0],l=(c[1],Object(a.useState)(t())),o=Object(s.a)(l,2),d=o[0],b=o[1],f=Object(a.useState)(),E=Object(s.a)(f,2),j=E[0],h=E[1],g=Object(a.useState)(),v=Object(s.a)(g,2),k=v[0],T=v[1],_=Object(a.useState)(),y=Object(s.a)(_,2),D=y[0],N=y[1],$=Object(C.a)(x,{update:function(e,t){return N(t.data.insert_TimeStamp.returning[0].id)},refetchQueries:function(e){return[{query:L}]}}),q=Object(s.a)($,1)[0],U=Object(C.a)(R,{refetchQueries:function(e){return[{query:L}]}}),F=Object(s.a)(U,1)[0],A=Object(C.b)(I,{variables:{UserId:e.user.sub}}),B=A.loading,z=A.data,M=Object(a.useState)(0),W=Object(s.a)(M,2),H=W[0],Q=W[1],J=Object(a.useState)(!1),G=Object(s.a)(J,2),K=G[0],Y=G[1],Z=Object(a.useState)(!1),X=Object(s.a)(Z,2);X[0],X[1];!function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){Q(H+1)}),K?1e3:null);var V=function(e){var t=Math.floor(e/60/60),n=Math.floor(e/60%60),a=Math.floor(e%60%60),r=function(e){return e<10?"0".concat(e):"".concat(e)};return"".concat(r(t),"h  ").concat(r(n),"m  ").concat(r(a),"s")},ee=function(){var t=Object(m.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Y(!0),q({variables:{Project:j,Task:k,StartTime:(new Date).toUTCString(),Public:!0,UserId:e.user.sub}});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){z&&z.TimeStamp.length>0&&(Q((new Date-new Date(z.TimeStamp[0].StartTime))/1e3),N(z.TimeStamp[0].id),Y(!0),h(z.TimeStamp[0].parentProject.id),T(z.TimeStamp[0].parentTask.id)),z&&z.TimeStamp.length<=0&&(Y(!1),N(null),h(""),T(""),Q(null))}),[z,e]),B?r.a.createElement(p.a,{name:"cog",size:"huge",loading:!0}):r.a.createElement(O.a,null,e.projects||e.tasks?r.a.createElement(r.a.Fragment,null,e.projects?r.a.createElement(S.a,{placeholder:"Select Project",search:!0,selection:!0,value:j,options:i,onChange:function(e,n){h(n.value),T(),b(t(n.value))}}):null,r.a.createElement(S.a,{disabled:!j,placeholder:"Select Task",search:!0,selection:!0,value:k,options:d,onChange:function(e,t){T(t.value)}})):null,r.a.createElement(P.a,{floated:"right"},r.a.createElement(P.a.Row,{verticalAlign:"middle"},r.a.createElement(P.a.Column,{center:!0,width:12},r.a.createElement("h4",null," ",V(H||0)," ")),r.a.createElement(P.a.Column,{width:4},r.a.createElement(p.a,{disabled:!j||!k,size:"large",name:K?"stop circle":"play circle",color:K?"red":"green",onClick:function(){return K?(Y(!1),Q(0),void F({variables:{id:D,Project:j,Task:k,EndTime:(new Date).toUTCString(),Public:!0}})):ee()}})))))};function K(){var e=Object(b.a)(["\n  query getProjects {\n    Project {\n      id\n      Name\n      Description\n      TimeStamps{\n            StartTime\n            EndTime\n            parentTask{ \n                id\n                Name \n            }\n      }\n      Tasks {\n          id\n          Name\n          parentProject {\n              id\n          }\n      }\n    }\n  }\n"]);return K=function(){return e},e}var Y=y()(K()),Z=function(e){var t=v(),n=t.isAuthenticated,c=t.loginWithRedirect,i=t.user,l=t.logout,o=Object(C.b)(Y),u=o.data,m=(o.loading,Object(a.useState)(!1)),d=Object(s.a)(m,2);d[0],d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement(O.a.Item,{position:"right"},!n&&r.a.createElement(T.a,{positive:!0,onClick:function(){return c()}},"Log in"),n&&r.a.createElement(T.a,{positive:!0,onClick:function(){return l()}},"Log out"))),console.log(i),n&&u&&r.a.createElement(G,{projects:u.Project,user:i}))},X=n(32),V=n(64),ee=n(277),te=n(278),ne=n(275);var ae=function(e){var t=e.component,n=e.path,c=v(),i=c.loading,l=c.isAuthenticated,o=c.loginWithRedirect,u=c.getTokenSilently;return Object(a.useEffect)((function(){i||l||u()})),r.a.createElement(d.a,{path:n,render:function(){return l?r.a.createElement(t,null):(o({}),r.a.createElement("div",null))}})},re=n(496),ce=n(493),ie=n(490),le=n(491),oe=n(487),ue=n(489),me=n(488),se=n(29),de=function(e){return r.a.createElement(ce.a.Item,{key:e.stamp.id},r.a.createElement(ce.a.Content,null,r.a.createElement(P.a,null,r.a.createElement(P.a.Row,null,r.a.createElement(P.a.Column,{width:8},r.a.createElement("h4",null,r.a.createElement(se.a,{to:"/task/".concat(e.stamp.parentTask.id)},e.stamp.parentTask.Name)),r.a.createElement(se.a,{style:{fontWeight:"500"},to:"/project/".concat(e.stamp.parentProject.id)},"for ",e.stamp.parentProject.Name)),r.a.createElement(P.a.Column,{style:{textAlign:"right"},width:8},r.a.createElement("div",null,r.a.createElement("h4",null,e.stamp.EndTime?function(e){var t=Math.floor(e/60/60),n=Math.floor(e/60%60),a=Math.floor(e%60%60),r=function(e){return e<10?"0".concat(e):"".concat(e)};return"".concat(r(t),"h  ").concat(r(n),"m  ").concat(r(a),"s")}((new Date(e.stamp.EndTime)-new Date(e.stamp.StartTime))/1e3):"Clock Running"),r.a.createElement("strong",null,"  ",new Date(e.stamp.StartTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),"  "),"-",r.a.createElement("strong",null,"  ",new Date(e.stamp.EndTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))),r.a.createElement("div",{style:{fontStyle:"italic"}},r.a.createElement("strong",null,new Date(e.stamp.StartTime).toLocaleDateString([],{year:"numeric",month:"short",day:"numeric"}))))))))},pe=function(e){var t=e.timestamps;return Object(a.useEffect)((function(){}),[t]),r.a.createElement(ce.a,{divided:!0,relaxed:!0,className:"panel padding-16"},r.a.createElement("h3",null,"TimeStamps"),t.map((function(e,t){return r.a.createElement(de,{key:t,stamp:e})})))};n(263);function be(){var e=Object(b.a)(["\n  query GET_TIMESTAMPS {\n    TimeStamp(order_by: {StartTime: asc, EndTime: desc_nulls_first}, where: {EndTime: {_is_null: false}}){\n        StartTime\n        EndTime\n        parentTask{ \n            id\n            Name \n        }\n        parentProject{\n            id\n            Name\n        }\n    }\n  }\n"]);return be=function(){return e},e}y()(be());var fe=n(43),Ee=n(265),je=n.n(Ee),he=function(e){var t=e.data,n=Object(a.useRef)(),c=Object(a.useRef)(),i=function(e){var t=Object(a.useState)(null),n=Object(s.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=e.current,n=new ResizeObserver((function(e){e.forEach((function(e){c(e.contentRect)}))}));return n.observe(t),function(){n.unobserve(t)}}),[e]),r}(c),l=Object(a.useState)([new Date(Date.now()-6048e5).toLocaleDateString("en-CA"),new Date(Date.now()+864e5).toLocaleDateString("en-CA")]),o=Object(s.a)(l,2),u=o[0],m=o[1],d=Object(a.useState)(),p=Object(s.a)(d,2),b=p[0];p[1],t.map((function(e){return e.parentProject.Name})).filter((function(e,t,n){return n.indexOf(e)===t}));return Object(a.useEffect)((function(){t.sort((function(e,t){return new Date(e.StartTime)-new Date(t.StartTime)})),t=t.filter((function(e){return new Date(e.StartTime)>new Date(u[0])&&new Date(e.StartTime)<new Date(u[1])}));var e=i||c.current.getBoundingClientRect(),a=(e.width,e.height,Object(fe.g)(n.current));if(i){var r=Object(fe.d)(t,(function(e){return new Date(e.StartTime)})),l=Object(fe.c)(t,(function(e){return new Date(e.StartTime)})),o=Object(fe.f)().domain([r,l]).range([0,i.width-24]),m=(Object(fe.d)(t,(function(e){return(new Date(e.EndTime)-new Date(e.StartTime))/1e3/60})),Object(fe.c)(t,(function(e){return(new Date(e.EndTime)-new Date(e.StartTime))/1e3/60}))),s=Object(fe.e)().domain([m,0]).range([0,i.height-88]);a.selectAll(".dots").data(t).join("circle").attr("class","dots").attr("stroke","#145b71").attr("fill","blue").attr("r",".1em").attr("cx",(function(e){return o(new Date(e.StartTime))})).attr("cy",(function(e){return s((new Date(e.EndTime)-new Date(e.StartTime))/1e3/60)})),a.selectAll(".project").data(t).join("line").attr("class","project").attr("stroke","#145b71").attr("x1",(function(e){return o(new Date(e.StartTime))})).attr("y1",i.height-88).attr("x2",(function(e){return o(new Date(e.StartTime))})).attr("y2",(function(e){return s((new Date(e.EndTime)-new Date(e.StartTime))/1e3/60)})).attr("stroke-width","1px");var d=Object(fe.a)(o).ticks(fe.h.every(1));a.select(".x-axis").style("transform","translateY(".concat(i.height-88,"px)")).call(d);var p=Object(fe.b)(s);a.select(".y-axis").style("transform","translateX(".concat(i.width-24,"px)")).call(p)}}),[t,i,b,u]),r.a.createElement(r.a.Fragment,null,u[0]>=u[1]?r.a.createElement("div",{style:{color:"red",borderRadius:"8px",background:"white",padding:"8px",marginTop:"8px",marginBottom:"8px"}},r.a.createElement("span",null,"End date must be greater than begin date.")):null,t==[]?r.a.createElement("div",{style:{color:"red",borderRadius:"8px",background:"white",padding:"8px",marginTop:"8px",marginBottom:"8px"}},r.a.createElement("span",null,"No projects data for this time period.")):null,r.a.createElement("div",{ref:c,style:{paddingBottom:"4em"},className:"inset margin-v-16 padding-16 ui ten wide"},r.a.createElement("div",{style:{paddingBottom:"24px"}},r.a.createElement("span",null,"From "),r.a.createElement(oe.a,{type:"date",id:"startDate",name:"startDate",value:u[0],onChange:function(e){return m([e.target.value,u[1]])}}),r.a.createElement("span",null," to "),r.a.createElement(oe.a,{type:"date",id:"endDate",name:"endDate",value:u[1],onChange:function(e){m([u[0],e.target.value]),console.log(t)}})),r.a.createElement("div",null,r.a.createElement("svg",{ref:n,style:{paddingBottom:"4em"},className:je.a["overflow-visible"]},t==[]?r.a.createElement("h1",null,"No Data"):null,r.a.createElement("g",{className:"x-axis"}),r.a.createElement("g",{className:"y-axis"}),r.a.createElement("g",{className:"brush"})))))},ge=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],i=n[1],l=Object(a.useState)(e.id),o=Object(s.a)(l,2),u=o[0],m=(o[1],Object(a.useState)(e.name)),d=Object(s.a)(m,2),b=d[0],f=d[1],E=Object(a.useState)(e.description),j=Object(s.a)(E,2),h=j[0],g=j[1],v=Object(a.useState)(e.isPublic),k=Object(s.a)(v,2),O=k[0],w=k[1],S=function(e){i(!1)},P=Object(C.a)(H,{refetchQueries:function(e){return[{query:L}]}}),_=Object(s.a)(P,2),y=_[0];_[1].projData;return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{icon:!0,labelPosition:"left",color:"twitter",onClick:function(){i(!0)}},"Edit",r.a.createElement(p.a,{name:"edit outline"})),r.a.createElement(ie.a,{dimmer:"blurring",open:c,onClose:function(){return S()}},r.a.createElement(ie.a.Header,null,"Edit project"),r.a.createElement(ie.a.Content,null,r.a.createElement(le.a,{onSubmit:function(e){e.preventDefault(),y({variables:{id:u,Description:h,Name:b,Public:O}}),S()}},r.a.createElement(le.a.Field,null,r.a.createElement("label",null,"Project name"),r.a.createElement(oe.a,{placeholder:"Project Name",value:b,onChange:function(e){return f(e.target.value)}})),r.a.createElement(le.a.Field,null,r.a.createElement("label",null,"Project description"),r.a.createElement(ue.a,{rows:4,placeholder:"Project Description",value:h,onChange:function(e){return g(e.target.value)}})),r.a.createElement(le.a.Field,null,r.a.createElement("label",null,"Make project public?"),r.a.createElement(me.a,{toggle:!0,checked:O,onClick:function(e){w(e.target.checked=!O)}})),r.a.createElement(T.a,{positive:!0,type:"submit",icon:"checkmark",labelPosition:"right",content:"Submit Changes"})))))},ve=function(){var e=v().user,t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],i=n[1],l=Object(a.useState)(""),o=Object(s.a)(l,2),u=o[0],m=o[1],d=Object(a.useState)(""),b=Object(s.a)(d,2),f=b[0],E=b[1],j=Object(a.useState)(!0),h=Object(s.a)(j,2),g=h[0],k=h[1],O=Object(C.a)(W,{variables:{UserId:e.sub},refetchQueries:function(e){return[{query:L}]}}),w=Object(s.a)(O,2),S=w[0],_=(w[1].projData,Object(C.a)(M,{refetchQueries:function(e){return[{query:L}]}})),y=Object(s.a)(_,1)[0],D=function(e){i(!1)},N=Object(C.b)(L),$=N.loading,x=N.error,R=N.data;return $?r.a.createElement(p.a,{name:"cog",size:"huge",loading:!0}):x||!R?r.a.createElement("div",null,"ZOINKS! We made a boo boo. Please try back later"):r.a.createElement("div",null,r.a.createElement(re.a,{style:{margin:"12px"}},r.a.createElement("p",null,r.a.createElement(se.a,{to:"/"},"Home")," / Projects")),r.a.createElement(he,{data:R.TimeStamp}),r.a.createElement(P.a,null,r.a.createElement(P.a.Row,null,r.a.createElement(P.a.Column,{width:11},r.a.createElement("h1",null,"All Projects")))),r.a.createElement(P.a,{stackable:!0},r.a.createElement(P.a.Row,null,r.a.createElement(P.a.Column,{width:10},r.a.createElement(ce.a,{divided:!0,relaxed:!0,className:"panel padding-16"},r.a.createElement("h3",null,"Projects"),r.a.createElement(ce.a.Item,{key:"Create new projects key"},r.a.createElement(ce.a.Content,null,r.a.createElement(P.a,null,r.a.createElement(P.a.Row,null,r.a.createElement(P.a.Column,null,r.a.createElement("button",{className:"ui twitter icon button",onClick:function(){i(!0)}},r.a.createElement("i",{"aria-hidden":"true",className:"add icon"}),"Create Project")))))),R.Project.map((function(e,t){return r.a.createElement(ce.a.Item,{key:e.id},r.a.createElement(ce.a.Content,null,r.a.createElement(P.a,null,r.a.createElement(P.a.Row,null,r.a.createElement(P.a.Column,{width:12},r.a.createElement(ce.a.Header,null,r.a.createElement(se.a,{to:"/project/".concat(e.id)},e.Name)),e.Description),r.a.createElement(P.a.Column,{width:4},r.a.createElement(ge,{id:e.id,name:e.Name,description:e.Description,isPublic:e.Public}),r.a.createElement("span",{floated:"right"},r.a.createElement(p.a,{size:"large",color:"red",onClick:function(){y({variables:{id:e.id}}),k(!1),m(""),E("")},floated:"right",name:"trash alternate outline"})))))))})))),r.a.createElement(P.a.Column,{width:6},r.a.createElement(pe,{timestamps:R.TimeStamp})))),r.a.createElement(ie.a,{dimmer:"blurring",open:c,onClose:function(){return D()}},r.a.createElement(ie.a.Header,null,"Create a new project"),r.a.createElement(ie.a.Content,null,r.a.createElement(le.a,{onSubmit:function(e){e.preventDefault(),S({variables:{Description:f,Name:u,Public:g}}),D()}},r.a.createElement(le.a.Field,null,r.a.createElement("label",null,"Project name"),r.a.createElement(oe.a,{placeholder:"Project Name",value:u,onChange:function(e){return m(e.target.value)}})),r.a.createElement(le.a.Field,null,r.a.createElement("label",null,"Project description"),r.a.createElement(ue.a,{rows:4,placeholder:"Project Description",value:f,onChange:function(e){return E(e.target.value)}})),r.a.createElement(le.a.Field,null,r.a.createElement("label",null,"Make project public?"),r.a.createElement(me.a,{toggle:!0,checked:g,onClick:function(e){k(e.target.checked=!g)}})),r.a.createElement(T.a,{positive:!0,type:"submit",icon:"checkmark",labelPosition:"right",content:"Create Project"})))))};function ke(){var e=Object(b.a)(["mutation UpdateTask($id: uuid!, $Description: String, $Name: String, $Public: Boolean, $Project: uuid) {\n        update_Task(where: {id: {_eq: $id}}, _set: {Description: $Description, Name: $Name, Public: $Public, Project: $Project}) {\n            affected_rows\n        }\n    }"]);return ke=function(){return e},e}function Oe(){var e=Object(b.a)(["\nmutation deleteTask($id: uuid!) {\n    delete_Task(where: {id: {_eq: $id}}) {\n      affected_rows\n    }\n  }\n"]);return Oe=function(){return e},e}y()(Oe());var Te=y()(ke()),we=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],i=n[1],l=Object(a.useState)(e.id),o=Object(s.a)(l,2),u=o[0],m=(o[1],Object(a.useState)(e.name)),d=Object(s.a)(m,2),b=d[0],f=d[1],E=Object(a.useState)(e.description),j=Object(s.a)(E,2),h=j[0],g=j[1],k=Object(a.useState)(e.public),O=Object(s.a)(k,2),w=O[0],P=O[1],_=Object(a.useState)(e.project),y=Object(s.a)(_,2),D=y[0],N=y[1],$=v(),x=$.user,R=($.isAuthenticated,$.getIdTokenClaims,function(e){i(!1)}),q=Object(C.a)(Te,{refetchQueries:function(e){return[{query:J,variables:{id:D}},{query:L},{query:I,variables:{UserId:x.sub}}]}}),U=Object(s.a)(q,2),F=U[0],A=(U[1].projData,Object(C.b)(Q)),B=(A.loading,A.error,A.data);return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{icon:!0,labelPosition:"left",color:"twitter",onClick:function(){i(!0)}},"Edit",r.a.createElement(p.a,{name:"edit outline"})),r.a.createElement(ie.a,{dimmer:"blurring",open:c,onClose:function(){return R()}},r.a.createElement(ie.a.Header,null,"Edit task"),r.a.createElement(ie.a.Content,null,r.a.createElement(le.a,{onSubmit:function(e){e.preventDefault(),F({variables:{id:u,Description:h,Name:b,Public:w,Project:D}}),R()}},r.a.createElement(le.a.Field,null,r.a.createElement("label",null,"Task name"),r.a.createElement(oe.a,{placeholder:"Task Name",value:b,onChange:function(e){return f(e.target.value)}})),r.a.createElement(le.a.Field,null,r.a.createElement("label",null,"Select Parent Project"),r.a.createElement(S.a,{button:!0,className:"icon",floating:!0,labeled:!0,icon:"folder open",value:D,placeholder:"Select Project",options:B.Project.map((function(e){return{key:e.id,text:e.Name,value:e.id}})),onChange:function(e,t){return N(t.value)}})),r.a.createElement(le.a.Field,null,r.a.createElement("label",null,"Task description"),r.a.createElement(ue.a,{rows:4,placeholder:"Task Description",value:h,onChange:function(e){return g(e.target.value)}})),r.a.createElement(le.a.Field,null,r.a.createElement("label",null,"Make task public?"),r.a.createElement(me.a,{toggle:!0,checked:w,onClick:function(e){P(e.target.checked=!w)}})),r.a.createElement(T.a,{positive:!0,type:"submit",icon:"checkmark",labelPosition:"right",content:"Submit Changes"})))))};function Se(){var e=Object(b.a)(["\nmutation deleteTask($id: uuid!) {\n    delete_Task(where: {id: {_eq: $id}}) {\n      affected_rows\n    }\n  }\n"]);return Se=function(){return e},e}function Pe(){var e=Object(b.a)(["\n  mutation addTask( $Name: String!, $Description: String!, $Public: Boolean!, $Project: uuid!, $UserId: String! ){\n    insert_Task(objects: { Description: $Description, Name: $Name, Public: $Public, Project: $Project, user_id: $UserId }) {\n      affected_rows\n    }\n  }\n"]);return Pe=function(){return e},e}var _e=y()(Pe()),ye=y()(Se()),Ce=function(){var e=Object(d.f)().id,t=v().user,n=Object(a.useState)(!1),c=Object(s.a)(n,2),i=c[0],l=c[1],o=Object(a.useState)(""),u=Object(s.a)(o,2),m=u[0],b=u[1],f=Object(a.useState)(""),E=Object(s.a)(f,2),j=E[0],h=E[1],g=Object(a.useState)(!0),k=Object(s.a)(g,2),O=k[0],w=k[1],S=Object(C.a)(_e,{variables:{UserId:t.sub},refetchQueries:function(t){return[{query:J,variables:{id:e}}]}}),_=Object(s.a)(S,2),y=_[0],D=(_[1].projData,Object(C.a)(ye,{refetchQueries:function(t){return[{query:J,variables:{id:e}}]}})),N=Object(s.a)(D,1)[0],$=function(){return l(!1)},x=Object(C.b)(J,{variables:{id:e}}),R=x.loading,I=x.data;return Object(a.useEffect)((function(){}),[I]),R?r.a.createElement(p.a,{name:"cog",size:"huge",loading:!0}):r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement("p",null,r.a.createElement(se.a,{to:"/"},"Home")," > ",r.a.createElement(se.a,{to:"/projects"},"Projects")," > ",I.Project_by_pk.Name)),r.a.createElement(P.a,null,r.a.createElement(P.a.Row,null,r.a.createElement(P.a.Column,{width:16},r.a.createElement("h1",null,I.Project_by_pk.Name),r.a.createElement("p",null,I.Project_by_pk.Description)))),r.a.createElement(P.a,{divided:!0},r.a.createElement(P.a.Row,null,r.a.createElement(P.a.Column,{width:10},r.a.createElement(ce.a,{divided:!0,relaxed:!0},r.a.createElement("h3",null,"Tasks"),r.a.createElement(ce.a.Item,{key:"Create new tasks key"},r.a.createElement(ce.a.Content,null,r.a.createElement(P.a,null,r.a.createElement(P.a.Row,null,r.a.createElement(P.a.Column,null,r.a.createElement("button",{className:"ui twitter icon button",onClick:function(){l(!0)}},r.a.createElement("i",{"aria-hidden":"true",className:"add icon"}),"Create Task")))))),I.Project_by_pk.Tasks.map((function(e,t){return r.a.createElement(ce.a.Item,{key:e.id},r.a.createElement(ce.a.Content,null,r.a.createElement(P.a,null,r.a.createElement(P.a.Row,null,r.a.createElement(P.a.Column,{width:12},r.a.createElement(ce.a.Header,null,r.a.createElement(se.a,{to:"/task/".concat(e.id)},e.Name)),e.Description),r.a.createElement(P.a.Column,{width:4},r.a.createElement(we,{id:e.id,name:e.Name,description:e.Description,project:e.Project,public:e.Public}),r.a.createElement("span",{floated:"right"},r.a.createElement(p.a,{size:"large",color:"red",onClick:function(){N({variables:{id:e.id}})},floated:"right",name:"trash alternate outline"})))))))})))),r.a.createElement(P.a.Column,{width:6},I.Project_by_pk.TimeStamps?r.a.createElement(pe,{timestamps:I.Project_by_pk.TimeStamps}):r.a.createElement("p",null,"Get workin'! No timestamps submitted yet...")))),r.a.createElement(ie.a,{dimmer:"blurring",open:i,onClose:function(){return $()}},r.a.createElement(ie.a.Header,null,"Create a new task for ",I.Project_by_pk.Name),r.a.createElement(ie.a.Content,null,r.a.createElement(le.a,{onSubmit:function(t){t.preventDefault(),y({variables:{Description:j,Name:m,Public:O,Project:e}}),$()}},r.a.createElement(le.a.Field,null,r.a.createElement("label",null,"Task name"),r.a.createElement(oe.a,{placeholder:"Task Name",value:m,onChange:function(e){return b(e.target.value)}})),r.a.createElement(le.a.Field,null,r.a.createElement("label",null,"Task description"),r.a.createElement(ue.a,{rows:4,placeholder:"Task Description",value:j,onChange:function(e){return h(e.target.value)}})),r.a.createElement(le.a.Field,null,r.a.createElement("label",null,"Make task public?"),r.a.createElement(me.a,{toggle:!0,checked:O,onClick:function(e){w(e.target.checked=!O)}})),r.a.createElement(T.a,{positive:!0,type:"submit",icon:"checkmark",labelPosition:"right",content:"Create Project"}))),r.a.createElement(ie.a.Actions,null)))};function De(){var e=Object(b.a)(["\n  query getTask($id: uuid!) {\n    Task_by_pk(id: $id) {\n      id\n      Name\n      Description\n      TimeStamps(order_by: {StartTime: desc, EndTime: desc_nulls_first}){\n            StartTime\n            EndTime\n            parentTask{ \n                id\n                Name \n            }\n            parentProject {\n                id  \n                Name\n            }\n      }\n      parentProject {\n            id  \n            Name\n      }\n    }\n  }\n"]);return De=function(){return e},e}var Ne=y()(De()),$e=function(){var e=Object(d.f)().id,t=Object(C.b)(Ne,{variables:{id:e}}),n=t.loading,a=t.data;return n?r.a.createElement(p.a,{name:"cog",size:"huge",loading:!0}):r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement("p",null,r.a.createElement(se.a,{to:"/"},"Home")," > ",r.a.createElement(se.a,{to:"/projects"},"Projects")," > ",r.a.createElement(se.a,{to:"/project/".concat(a.Task_by_pk.parentProject.id)},a.Task_by_pk.parentProject.Name)," > ",a.Task_by_pk.Name)),r.a.createElement("h1",null,a.Task_by_pk.Name),r.a.createElement("p",null,a.Task_by_pk.Description),r.a.createElement(P.a,{divided:!0},r.a.createElement(P.a.Row,null,r.a.createElement(P.a.Column,{width:10},a?r.a.createElement(pe,{timestamps:a.Task_by_pk.TimeStamps}):r.a.createElement("p",null,"Get workin'! No timestamps submitted yet...")),r.a.createElement(P.a.Column,{width:6},r.a.createElement("h3",null,"Task Details"),r.a.createElement("div",null,r.a.createElement("p",null,a.Task_by_pk.Description))))))},xe=n(36),Re=Object(xe.a)();var Ie=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=(t[0],t[1],v()),c=n.user,i=n.isAuthenticated,o=n.getIdTokenClaims,b=Object(a.useState)(""),f=Object(s.a)(b,2),E=f[0],j=f[1],h=v(),g=h.getTokenSilently,k=h.loading,O=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:t=e.sent,j(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();O();var T=new te.a({uri:"https://time-track-application.herokuapp.com/v1/graphql"}),w=Object(ne.a)((function(e,t){var n=t.headers,a=E;return a?{headers:Object(l.a)(Object(l.a)({},n),{},{Authorization:"Bearer ".concat(a.__raw)})}:{headers:Object(l.a)({},n)}})),S=new V.a({link:w.concat(T),cache:new ee.a});return Object(a.useEffect)((function(){O()}),[k,c,o,g,i]),k?r.a.createElement(p.a,{name:"cog",size:"huge",loading:!0}):r.a.createElement(d.b,{history:Re},r.a.createElement(X.a,{client:S},r.a.createElement(Z,null),r.a.createElement(d.c,null,r.a.createElement(ae,{path:"/",component:ve,exact:!0}),r.a.createElement(ae,{path:"/projects",component:ve,exact:!0}),r.a.createElement(ae,{path:"/project/:id",component:Ce,exact:!0}),r.a.createElement(ae,{path:"/task/:id",component:$e,exact:!0}),r.a.createElement(ae,{path:"/timer",component:G}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qe=n(103),Ue=function(e){window.history.replaceState({},document.title,e&&e.targetUrl?e.targetUrl:window.location.pathname)},Fe=function(){return r.a.createElement(k,{domain:qe.domain,client_id:qe.clientId,redirect_uri:qe.redirect_uri,audience:qe.audience,onRedirectCallback:Ue},r.a.createElement(Ie,{className:"content"}))};i.a.render(r.a.createElement(Fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[476,1,2]]]);
//# sourceMappingURL=main.4f731afc.chunk.js.map